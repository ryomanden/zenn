---
title: "VolumioをAirPlay2に対応させる"
emoji: "🔈"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["RaspberryPi", "Linux", "Audio"]
published: false
---
Volumioとは、ネットワークオーディオプレイヤーを作るためのOSです。デフォルトでAirPlayに対応していますが、残念ながら未だAirPlay2には対応していません。
そこで、本記事では無理やりAirPlay2に対応させてやろうと思います。

# Volumioのインストール
割愛します

# memo

## enable ssh
http://volumio.local/dev ssh有効化
ssh ID&PASS : volumio

## 必要なパッケージのインストール
``` bash
sudo apt update && sudo apt upgrade -y
sudo apt install -y binutils make libasound2-dev g++
sudo apt install --no-install-recommends -y git xxd xmltoman autoconf automake libtool libpopt-dev libconfig-dev avahi-daemon libavahi-client-dev libssl-dev libsoxr-dev libplist-dev libsodium-dev libavutil-dev libavcodec-dev libavformat-dev uuid-dev libgcrypt-dev
```

## 古いファイルの削除
``` bash
mv /tmp/shairport-sync.conf /tmp/shairport-sync.conf.old
sudo mv /usr/bin/shairport-sync /usr/bin/shairport-sync.old
sudo rm /lib/systemd/system/shairport-sync.service
```

## install NQPTP
``` bash
mkdir temp
cd temp

git clone https://github.com/mikebrady/nqptp.git
cd nqptp

autoreconf -fi
./configure --with-systemd-startup
make && sudo make install

sudo systemctl enable nqptp
sudo systemctl start nqptp 
cd ..
```

``` bash
ここに出力を貼る
```

## install shairport-sync
```bash
git clone https://github.com/mikebrady/shairport-sync.git
cd shairport-sync
git checkout tags/4.3.4

autoreconf -fi

./configure --sysconfdir=/etc --with-alsa --with-soxr --with-avahi --with-ssl=openssl --with-metadata  --with-systemd --with-airplay-2

make -j && sudo make install
sudo systemctl enable  shairport-sync
sudo systemctl start shairport-sync
```